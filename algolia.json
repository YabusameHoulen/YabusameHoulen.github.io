[
  {
    "objectID": "d096f826567a37efb895a7a47283b2083afd0a78",
    "permalink": "/post/hpc_1/",
    "title": "Write Fast Julia Code","content": "\rå°è¯•æ•´åˆJuliaä»£ç çš„ä¼˜åŒ–æ–¹æ³•\rä¸åº”è¯¥ä¼˜åŒ–æ‰€æœ‰ä»£ç \rProfilingåªéœ€è¦æµ‹ä»£ç ä¸­è¾ƒæ…¢çš„å‡½æ•°ï¼Œä¸€èˆ¬ä½¿ç”¨BenchmarkTools.jlä¸­çš„å®ï¼Œåœ¨ç¡¬ä»¶ç›¸åŒçš„æƒ…å†µä¸‹æµ‹è¯•\u0026hellip;\nä»£ç ä¼˜åŒ–çš„è¿‡ç¨‹å¾€å¾€ç‰ºç‰²äº†å…¶ä»–æ–¹é¢ï¼š\nä¼˜åŒ–åçš„ä»£ç é€šå¸¸æ›´é•¿æ›´éš¾æ‡‚ï¼Œå¯è¯»æ€§è¾ƒå·® éš¾ä»¥é€‚åº”æœªæ¥æ”¹åŠ¨ï¼Œéš¾ä»¥æµ‹è¯•æˆ–ç§»æ¤ å•çº¯åœ°è®©ç”µè„‘è¿è¡Œæ›´ä¹…å¯ä»¥æœ‰æ•ˆæŠµæ¶ˆä¼˜åŒ–ä»£ç çš„æ—¶é—´\nå…ƒç¼–ç¨‹/ä»£ç ç®€å†™/ç”Ÿæˆæ¨¡å¼\rmacroæ˜¯åœ¨ç¼–è¯‘æ—¶è¿è¡Œå¹¶è¾“å‡ºä»£ç çš„å‡½æ•°ï¼Œå¯ä»¥æ„å»ºJuliaè¡¨è¾¾å¼\nmacro defName(name, definition) return quote macro $(esc(name))() esc($(Expr(:quote, definition))) end end end @defName myField begin a::Int end struct test @myField b::Int end Expr(:quote, a = 1) å°±ç›¸å½“äº :(:(a = 1))\nevalåœ¨å…¨å±€ä½œç”¨åŸŸä¸­è¿è¡Œï¼Œ@eval ç›¸å½“äºeval(quote ... end)çš„ç®€å†™\nå‘é‡åŒ–çš„ä»£ç ä¼šåˆ›å»ºä¸å¿…è¦çš„ä¸­é—´æ•°ç»„ï¼Œäº§ç”Ÿä¸å¿…è¦çš„â€œä¸´æ—¶åˆ†é…â€ï¼Œå‡æ…¢Juliaçš„é€Ÿåº¦\nä½¿ç”¨å¹¿æ’­.ç¬¦å·ï¼Œçœ‹ä¸Šå»åƒå‘é‡åŒ–ä»£ç ï¼ŒåŒæ—¶è¿›è¡Œä¸€ä¸ªå¾ªç¯çš„å±•å¼€ï¼š x .= x .+ f.(x) ç­‰ä»·äº\nfor i in eachindex(x) x[i] = x[i] + f(x[i]) end ä»»ä½•æ€§èƒ½å…³é”®æˆ–æ­£åœ¨è¢«åŸºå‡†æµ‹è¯•çš„ä»£ç éƒ½åº”è¯¥æ”¾åœ¨å‡½æ•°å†…éƒ¨ é‡æ–°æ’åˆ—ç»“æ„ä½“çš„å­—æ®µå¯ä»¥å‡å°‘å¡«å……ï¼ˆJulia ä½¿ç”¨ä¸ C ç›¸åŒçš„ç»“æ„ä½“å¸ƒå±€ï¼‰ ç»“æ„ä½“å½¢æˆçš„æ•°ç»„(AOS)å’ŒåŒ…å«æ•°ç»„çš„ç»“æ„ä½“(SOA)å†…å­˜å¸ƒå±€ä¸ä¸€æ ·ï¼Œä½¿ç”¨AOSå¯èƒ½ä¾¿äºç†è§£ç»´æŠ¤,ä½¿ç”¨SOAé˜²æ­¢å†…å­˜å¡«å……ï¼Œæœ‰åˆ©äºSIMDçš„ä½¿ç”¨\u0026hellip;ç»“åˆä¸€ä¸‹AOSOA é¿å…åœ¨å®¹å™¨å’Œç»“æ„ä½“ä¸­ä½¿ç”¨æŠ½è±¡ç±»å‹ è®¡ç®—è‡ªç”±åº¦/ä¸€äº›JuliaçŸ¥è¯†\rå†™ä¸ªå®Œå…¨ä¸å…·å¤‡ä»£è¡¨æ€§çš„ä¾‹å­ï¼Œå¤§æ¦‚æ˜¯å…¸å‹çš„åµŒå¥—forå¾ªç¯ï¼Œ$O(n^2)$\nfunction nearest_neighbour(points) N, D = size(points) neighbours = zeros(Int, N) for i in 1:N point_i = points[:, i] min_squared_dist = typemax(eltype(points)) for j in 1:N point_j = points[:, j] squared_dist = sum((point_i .- point_j).^2) if min_squared_dist \u0026lt; squared_dist min_squarerd_dist = squared_dist neighbours[i] = j end end end return neighbours end ç¨å¾®åˆ†æä¸€ä¸‹ä»¥é¿å…ä½¿ç”¨æ‹‰è·¨ç®—æ³•ï¼Œæˆ–è€…åšäº†ä¸å¿…è¦çš„æ“ä½œ\u0026hellip;\nArrayçš„è¿­ä»£é¡ºåºï¼šJulia åˆ—ä¸»åºï¼ˆçŸ©é˜µï¼‰ï¼ŒA[i, j] åº”è¯¥å°½é‡å›ºå®šiè€Œæ“ä½œj allocations ä¸€èˆ¬æŒ‡å †åˆ†é…ï¼Œç”±GCæ”¶é›†ï¼Œåº”è¯¥å°½é‡å‡å°‘ï¼ˆæå‰é¢„åˆ†é…/é¿å…æ— æ„ä¹‰çš„æ‹·è´ï¼‰ ä½¿ç”¨StaticArrays.jlæŠŠå°æ•°ç»„å¡åˆ°æ ˆä¸Š Amdahl\u0026rsquo;s Lawï¼šä¼°è®¡å›ºå®šå·¥ä½œé‡çš„ä»£ç å¹¶è¡ŒåŠ é€Ÿç¨‹åº¦ $$ S(s) = \\frac{1}{(1-p) + \\frac{p}{s}}\r$$ å…¶ä¸­$p$ä¸ºä»æ”¹è¿›çš„$s$èµ„æºä¸­å—ç›Šçš„æ—¶é—´æ¯”ä¾‹\nGustafsonâ€™s Lawï¼šä¼°è®¡å¢åŠ å·¥ä½œé‡çš„å¹¶è¡ŒåŠ é€Ÿç¨‹åº¦ $$\rS = \\frac{T_s}{T_p} = (1 - f) + fN\r$$","date": "2025-04-24 02:00:00",
    "updated": "2025-04-24 15:00:00"
  }, 
  {
    "objectID": "65bc4a04d8032969a24050994cbe069a863b2ef4",
    "permalink": "/post/hpc_0/",
    "title": "Speed Up Python","content": "\rè®°å½•è‡ªå·±çš„çæŠ˜è…¾\rå…ˆç»™Pythonæµ‹é€Ÿ\rç®€å•è®¡ç®—ä¸€ä¸‹fibonacciæ•°åˆ—çš„å€¼ï¼Œä½¿ç”¨é€’å½’å’Œé€’å½’åŠ cacheçš„åŸºç¡€æ–¹æ³•\nfrom datetime import datetime def fib(n): if n \u0026amp;lt; 2: result = n else: result = fib(n - 1) + fib(n - 2) return result ## é—­åŒ…å¢åŠ ç¼“å­˜ def cached_fib(): cache = {1: 1, 2: 1} def fibonacci(n): if n not in cache: cache[n] = fibonacci(n - 1) + fibonacci(n - 2) return cache[n] return fibonacci ## è¿™ä¸ªå°±ä¸ç”¨è¯•äº†( def fib_tr(n, ret=0, tmp=1): if n == 0: return ret else: return fib_tr(n-1, ret + tmp, ret) ç„¶åæµ‹ä¸€ä¸‹ç”¨æ—¶å¤šå°‘\nt1 = datetime.now() result1 = fib(35) t2 = datetime.now() f = cached_fib() result2 = f(35) t3 = datetime.now() result3 = f(36) t4 = datetime.now() print(f\u0026amp;#34;the 35th number is {result1}, use time {(t2 - t1).total_seconds()} s\u0026amp;#34;) print(f\u0026amp;#34;the 35th number is {result2}, use time {(t3 - t2).total_seconds()} s\u0026amp;#34;) print(f\u0026amp;#34;the 36th number is {result3}, use time {(t4 - t3).total_seconds()} s\u0026amp;#34;) the 35th number is 9227465, use time 0.842028 s\nthe 35th number is 9227465, use time 1.8e-05 s\nthe 36th number is 14930352, use time â€¦","date": "2025-04-13 15:00:00",
    "updated": "2025-04-13 15:00:00"
  }, 
  {
    "objectID": "5f98474743e52347613b2e0c682fa859935c78fa",
    "permalink": "/post/hello/",
    "title": "Hello World","content": "ğŸ’˜ åšéº— éœŠå¤¢ ğŸ’˜\nMarkdown Basic Functionality\ræ ‡é¢˜\rH1\rH2\rH3\rH4\rH5\rH6\rå¼ºè°ƒ\rEmphasis, aka italics, with asterisks or underscores.\nStrong emphasis, aka bold, with asterisks or underscores.\nCombined emphasis with asterisks and underscores.\nStrikethrough uses two tildes. Scratch this.\nåˆ—è¡¨\rDefinition List (dl)\rOrdered List (ol)\rList Item 1 List Item 2 List Item 3 Unordered List (ul)\rList Item 1 List Item 2 List Item 3 æ®µè½\rLorem ipsum dolor sit amet, test link consectetur adipiscing elit. Strong text pellentesque ligula commodo viverra vehicula. Italic text at ullamcorper enim. Morbi a euismod nibh. Underline text non elit nisl. Deleted text tristique, sem id condimentum tempus, metus lectus venenatis mauris, sit amet semper lorem felis a eros. Fusce egestas nibh at sagittis auctor. Sed ultricies ac arcu quis molestie. Donec dapibus nunc in nibh egestas, vitae volutpat sem iaculis. Curabitur sem tellus, elementum nec quam id, fermentum laoreet mi. Ut mollis ullamcorper turpis, vitae facilisis velit â€¦","date": "2025-04-01 11:00:00",
    "updated": "2025-04-01 11:00:00"
  }]